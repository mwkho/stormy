(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){e.exports=a(163)},133:function(e,t,a){},134:function(e,t,a){},158:function(e,t,a){},160:function(e,t,a){var n=a(15),r=function(e,t){return e.filter(function(e){return t.includes(e.type)}).map(function(e){var t=e.display_name.split(", British Columbia,")[0].split(",");return{name:t[0],region:t[t.length-1],lat:Number(e.lat),lon:Number(e.lon)}})};e.exports={getMountainCoordinates:function(e){return n.get("https://nominatim.openstreetmap.org/search.php?q=".concat(e,"%2C+british%20columbia&polygon_geojson=1&format=jsonv2")).then(function(e){return r(e.data,"volcano peak")})},getTrailCoordinates:function(e){return n.get("https://nominatim.openstreetmap.org/search.php?q=".concat(e,"%2C+british%20columbia&polygon_geojson=1&format=jsonv2")).then(function(e){return r(e.data,"track path footway")})}}},161:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),c=(a(133),a(9)),i=(a(134),a(232)),m=a(72),u=a(231),s=function(e,t){var a=Object(n.useState)(""),r=Object(c.a)(a,2),l=r[0],o=r[1];return Object(n.useEffect)(function(){var a=setTimeout(function(){return o(e)},t);return function(){return clearTimeout(a)}},[e,t]),l};function d(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],i=s(l,200),m=Object(n.useCallback)(e.onSearch,[i]);return Object(n.useEffect)(function(){i.trim()&&e.setLoadStatus("SEARCHING"),m(i)},[i,m]),Object(n.useEffect)(function(){o("")},[e.searchMode]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{style:{width:"80%",marginRight:"100px",paddingLeft:"200px"},variant:"filled",onChange:function(e){return o(e.target.value)},value:l}))}a(93);function p(e){return r.a.createElement("div",{class:"container"},r.a.createElement("img",{alt:"logo",className:"logo",style:{width:e.width+"px"},src:"../../../images/stormy.png"}),r.a.createElement("div",{class:"text"},r.a.createElement("h1",{class:"h1"},"Stormy BC")))}var E=a(234),f=a(207);function h(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null,r.a.createElement(f.a,{control:r.a.createElement(E.a,{checked:"trail"===e.mode,onChange:function(t){return e.setMode("trail"===e.mode?"mountain":"trail")}}),label:"Trail"}),r.a.createElement(f.a,{control:r.a.createElement(E.a,{checked:"mountain"===e.mode,onChange:function(t){return e.setMode("trail"===e.mode?"mountain":"trail")}}),label:"Mountain"})))}var g=a(28),v=a(15),b=a.n(v),y=(a(158),a(209)),w=a(235),k=a(210);function O(e){var t=e.lat,a=e.lon,n=[t-.5,a+.5],l=[t+.5,a-.5];return r.a.createElement(y.a,{center:[t,a],maxBounds:[n,l],zoom:15,scrollWheelZoom:!0},r.a.createElement(w.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(k.a,{position:[t,a]}))}var x=a(165),I=a(212),S=a(236),j=a(211),C=a(67),N=a.n(C),D=a(66),T=a.n(D),F=function(e){var t=e.poi,a=e.type,l=e.setPlaceId,o=Object(n.useState)(!1),i=Object(c.a)(o,2),m=i[0],u=i[1],s=Object(n.useState)(!1),d=Object(c.a)(s,2),p=d[0],E=d[1],f=r.a.createElement(S.a,{title:"Close",arrow:!0,placement:"right"},r.a.createElement(x.a,{style:{backgroundColor:"white"},onClick:function(){E(!1),u(!1)}},r.a.createElement(T.a,null))),h=r.a.createElement(S.a,{title:"Freeze the map",arrow:!0,placement:"right"},r.a.createElement(x.a,{style:{backgroundColor:"white"},onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return!p&&u(!1)},onClick:function(){return E(!0)}},r.a.createElement(N.a,null))),v=r.a.createElement(j.a,{style:{width:"500px",height:"400px"}},r.a.createElement(O,{lat:t.lat,lon:t.lon}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null,r.a.createElement(x.a,{onClick:function(){return function(t){e.display("CONDITIONS"),b.a.post("/information",{poi:t}).then(function(n){return e.setPOI(Object(g.a)({},t,{type:a})),e.setInformation(n.data),b.a.post("/add/place",{lat:t.lat,lon:t.lon,type:a,name:t.name,region:t.region})}).then(function(){return b.a.get("get/place/".concat(t.lat,"/").concat(t.lon))}).then(function(e){l(e.data.rows[0].id)}).then(setTimeout(function(){e.display("INFORMATION")},1e3))}(t)},style:{backgroundColor:"white",width:"800px"}},t.name," ",r.a.createElement("br",null),"   Region: ",t.region),p?f:h),m&&v)},M=function(e){var t=e.setPlaceId,a=e.type,n=e.setPOI,l=e.results.map(function(l,o){return r.a.createElement(F,{setPlaceId:t,key:o,poi:l,setInformation:e.setInformation,display:e.display,setPOI:n,type:a})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,l),r.a.createElement("p",{style:{marginBottom:"500px"}}))},P=a(58),H=a(213);function A(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,null),r.a.createElement(P.a,null,e.children))}var W=a(160),z=W.getMountainCoordinates,R=W.getTrailCoordinates,L="SEARCHING",B="SHOW";function _(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)([]),u=Object(c.a)(i,2),s=u[0],E=u[1],f=Object(n.useState)("trail"),g=Object(c.a)(f,2),v=g[0],b=g[1],y=Object(n.useState)("SHOW"),w=Object(c.a)(y,2),k=w[0],O=w[1];return Object(n.useEffect)(function(){("mountain"===v?z(l):R(l)).then(function(e){E(Object(m.a)(e)),setTimeout(function(){return O("SHOW")},500)}).catch(function(e){E([]),console.log(e.message)})},[l]),r.a.createElement("main",null,r.a.createElement(p,{width:200}),r.a.createElement(P.a,{display:"block",gutterBottom:!0},"Look up weather forecasts and avalanche bulletins all in one place!"),r.a.createElement(P.a,null,"Select either 'Trail' or 'Mountain' and start typing to begin."),r.a.createElement(h,{mode:v,setMode:b}),r.a.createElement(d,{setLoadStatus:O,searchMode:v,onSearch:function(e){o(e)}}),k===B&&r.a.createElement(M,{results:s,display:e.display,setPOI:e.setPOI,setInformation:e.setInformation,type:v,setPlaceId:e.setPlaceId}),k===L&&r.a.createElement(A,null," Searching "))}var U=a(219),G=a(81),V=a(221),Z=a(216),q=a(218),J=a(220),$=a(215),K=function(e,t,a,n,r){n("CONDITIONS"),b.a.post("/information",{poi:e}).then(function(n){return a(n.data),t(e),b.a.get("get/place/".concat(e.lat,"/").concat(e.lon))}).then(function(e){r(e.data.rows[0].id),n("INFORMATION")}).then()},Q=a(214),X=a(69),Y=a.n(X),ee=a(68),te=a.n(ee);function ae(e){var t=e.poi,a=e.display,n=e.setPOI,l=e.setInformation,o=e.setPlaceId;return r.a.createElement(k.a,{position:[t.lat,t.lon]},r.a.createElement(Q.a,null,r.a.createElement(P.a,{variant:"body2"},t.name),r.a.createElement(P.a,{variant:"body2"},"Region: ",t.region),r.a.createElement(i.a,{display:"flex",flexDirection:"row"},r.a.createElement(x.a,{variant:"contained",color:"primary",endIcon:r.a.createElement(te.a,null),onClick:function(){return K(t,n,l,a,o)}},"Conditions"),r.a.createElement(x.a,{variant:"contained",color:"secondary",onClick:function(){e.deleteFavourite(t)},endIcon:r.a.createElement(Y.a,null)},"Remove"))))}function ne(e){var t=e.poi,a=e.display,n=e.setPOI,l=e.setInformation,o=e.setPlaceId;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,r.a.createElement(Z.a,null,r.a.createElement(P.a,{variant:"body2"},t.name)),r.a.createElement(Z.a,null,r.a.createElement(P.a,{variant:"body2"},t.region)),r.a.createElement(Z.a,{className:""},r.a.createElement(x.a,{variant:"contained",color:"primary",endIcon:r.a.createElement(te.a,null),onClick:function(){return K(t,n,l,a,o)}},"Conditions")),r.a.createElement(Z.a,{className:""},r.a.createElement(x.a,{variant:"contained",color:"secondary",onClick:function(){e.deleteFavourite(t)},endIcon:r.a.createElement(Y.a,null)},"Remove"))))}var re=a(238),le=a(217);function oe(e){return r.a.createElement(re.a,{key:"topright",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3,open:e.open,onClose:e.onClose},r.a.createElement(le.a,{style:{backgroundColor:"#4caf50"},message:e.children}))}function ce(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],o=a[1],i=e.favourites,m=e.setFavourites,u=e.display,s=e.setInformation,d=e.setPOI,p=e.setPlaceId,E=["Name","Region","Actions"].map(function(e){return r.a.createElement(Z.a,{variant:"head",colSpan:"Actions"===e?2:1}," ",e," ")}),f=function(e){b.a.get("get/place/".concat(e.lat,"/").concat(e.lon)).then(function(e){var t=e.data.rows[0].id;return b.a.post("delete/favourite",{id:t})}).then(function(){return b.a.get("get/favourites")}).then(function(e){o(!0),m(e.data.rows)}).catch(function(e){return console.log(e)})},h=i?i.map(function(e){var t=parseFloat(e.lat),a=parseFloat(e.lon),n=e.name,l=e.region;return r.a.createElement(ae,{setPlaceId:p,poi:{lat:t,lon:a,name:n,region:l},display:u,setPOI:d,setInformation:s,deleteFavourite:f})}):null,g=i?i.map(function(e){var t=parseFloat(e.lat),a=parseFloat(e.lon),n=e.name,l=e.region;return r.a.createElement(ne,{setPlaceId:p,poi:{lat:t,lon:a,name:n,region:l},display:u,setPOI:d,setInformation:s,deleteFavourite:f})}):null;return r.a.createElement(j.a,{maxWidth:"md"},r.a.createElement(P.a,{variant:"h3"},"Check out your favourite spots!"),r.a.createElement(oe,{open:l,onClose:function(){return o(!1)}},"Removed from favourites!"),r.a.createElement(P.a,{variant:"body1"},"To see the conditions for your favourite locations, click on a point in the map or scroll down for your list of favourites and click on the 'Information'"),r.a.createElement(y.a,{center:[55.001251,-125.002441],minZoom:4.5,zoomSnap:.5,zoom:4.5,maxBounds:[[60,-140],[49.1,-114.2]],scrollWheelZoom:!0},r.a.createElement(w.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),h),r.a.createElement(G.a,{style:{marginBottom:"2rem"}},r.a.createElement(q.a,null,r.a.createElement(U.a,null,r.a.createElement(J.a,null,r.a.createElement($.a,null,E)),r.a.createElement(V.a,null,g)))))}a(161);var ie=a(208),me=a(108),ue=a.n(me),se=a(107),de=a.n(se),pe=a(222),Ee=a(106),fe=a.n(Ee),he=a(71),ge=a.n(he),ve=a(223);function be(e){var t=e.setPage,a=e.setFavourites,l=Object(n.useState)(!1),o=Object(c.a)(l,2),m=o[0],u=o[1];var s=r.a.createElement(i.a,{className:"sidenav"},r.a.createElement(pe.a,{container:!0,display:"flex",flexDirection:"row",justify:"flex-start"},r.a.createElement(pe.a,{item:!0},r.a.createElement(ie.a,{style:{color:"white"},size:"medium",edge:"start",onClick:function(){u(!1)}},r.a.createElement(T.a,null)))),r.a.createElement(pe.a,{container:!0,spacing:4,display:"flex",flexDirection:"column",justify:"center"},r.a.createElement(pe.a,{item:!0},r.a.createElement(x.a,{size:"large",onClick:function(){return t("HOME")},style:{backgroundColor:"white",width:"140px"},color:"white"},"Egg Eggerson",r.a.createElement(fe.a,null))),r.a.createElement(pe.a,{item:!0},r.a.createElement(x.a,{size:"large",onClick:function(){return t("HOME")},style:{backgroundColor:"white",width:"140px"},color:"white"},"Home",r.a.createElement(de.a,null))),r.a.createElement(pe.a,{item:!0},r.a.createElement(x.a,{size:"large",onClick:function(){t("LOADING"),b.a.get("/get/favourites").then(function(e){a(e.data.rows),setTimeout(function(){return t("FAVOURITES")},500)})},style:{backgroundColor:"white",width:"140px"},color:"white"},"Favourites",r.a.createElement(ge.a,null))),r.a.createElement(pe.a,{item:!0,container:!0,direction:"column",justify:"flex-end",alignItems:"baseline"},r.a.createElement(p,{width:160})))),d=r.a.createElement(pe.a,{container:!0,style:{position:"sticky",top:"0"}},r.a.createElement(pe.a,{item:!0,style:{position:"sticky",top:"0"}},r.a.createElement(x.a,{style:{position:"sticky",top:"0"},size:"large",onClick:function(){u(!0)},variant:"outline"},r.a.createElement(ue.a,null))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{direction:"right",in:m,mountOnEnter:!0,unmountOnExit:!0},s),!m&&d)}var ye=a(233),we=a(230),ke=a(112),Oe=a.n(ke),xe=a(229),Ie=a(113),Se=a.n(Ie),je=a(224),Ce=Object(je.a)({"danger-no-rating":{background:"white",color:"black"},"danger-low":{background:"#76ff03",color:"black"},"danger-moderate":{background:"yellow",color:"black"},"danger-considerable":{background:"orange",color:"black"},"danger-high":{background:"red",color:"black"},"danger-extreme":{background:"black",color:"white"},"danger-date":{background:"black",color:"white"},alpine:{background:"#cceeff",color:"black"},treeline:{background:"#76ff03",color:"black"},"below-treeline":{background:"#52b202",color:"black"}}),Ne=function(e){return e.includes("N/A")?"-no-rating":e.includes("1")?"-low":e.includes("2")?"-moderate":e.includes("3")?"-considerable":e.includes("4")?"-high":e.includes("5")?"-extreme":void 0};function De(e){var t=e.alp,a=e.btl,n=e.tln,l=Ce();return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head",classes:{root:l["danger-date"]}},e.date),r.a.createElement(Z.a,{classes:{root:l["danger-date"]}})),r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head",classes:{root:l.alpine}},"Alpine"),r.a.createElement(Z.a,{classes:{root:l["danger"+Ne(t)]}},t)),r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head",classes:{root:l.treeline}},"Treeline"),r.a.createElement(Z.a,{classes:{root:l["danger"+Ne(n)]}},n)),r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head",classes:{root:l["below-treeline"]}},"Below Treeline"),r.a.createElement(Z.a,{classes:{root:l["danger"+Ne(a)]}},a)))}var Te=a(225),Fe=a(226);function Me(e){var t=e.bulletin,a=e.convertDate,n=t.region,l=t.dateIssued,o=t.validUntil,c=t.highlights,i=t.avalancheSummary,m=t.snowpackSummary,u=t.dangerRatings;if(!n)return r.a.createElement(Te.a,{style:{height:"5rem"}},r.a.createElement(Fe.a,null,r.a.createElement(P.a,null,"The trail/mountain does not belong to a region with an avalanche bulletin.")));var s=function(e){return{__html:e}},d=u.map(function(e){var t=e.dangerRating,n=(t.alp,t.tln,t.btl,a(new Date(e.date)));return r.a.createElement(De,{date:n,alp:"1",tln:"3",btl:"4"})});return r.a.createElement(G.a,null,r.a.createElement(q.a,null,r.a.createElement(U.a,null,r.a.createElement("caption",null," Avalanche bulletin is provided by ",r.a.createElement("a",{href:"https://avalanche.ca/"},"Avalanche Canada"),". "),r.a.createElement(J.a,null,r.a.createElement($.a,null,r.a.createElement(Z.a,null,"Region"),r.a.createElement(Z.a,{variant:"body"},n.split("-").map(function(e){return e[0].toUpperCase()+e.slice(1,e.length)}).join(" ")))),r.a.createElement(V.a,null,r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head"},"Date Issued"),r.a.createElement(Z.a,null,a(new Date(l)))),r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head"},"Valid Until"),r.a.createElement(Z.a,null,o>l?a(new Date(o)):"Until further notice")),r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head"},"HighLights"),r.a.createElement(Z.a,null," ",r.a.createElement("div",{dangerouslySetInnerHTML:s(c)}))),d,r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head"},"Avalanche Summary"),r.a.createElement(Z.a,null," ",r.a.createElement("div",{dangerouslySetInnerHTML:s(i)}),"  ")),r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head"},"Snowpack Summary"),r.a.createElement(Z.a,null,"   ",r.a.createElement("div",{dangerouslySetInnerHTML:s(m)})))))))}var Pe=Object(je.a)({stickyHeader:{position:"sticky",left:"0",color:"white",background:"grey"},caption:{position:"static"}});function He(e){var t=e.weather,a=Pe(),n=t.dt.map(function(t,a){var n=new Date(1e3*t),l="".concat(n.getHours(),":00"),o="0:00"!==l;return r.a.createElement(Z.a,{key:"date-"+a},o?l:"".concat(e.convertDate(n,o)))});return r.a.createElement(G.a,null,r.a.createElement(q.a,null,r.a.createElement(U.a,{size:"small"},r.a.createElement("caption",{className:a.caption},"* total volume for the hour ",r.a.createElement("br",null),"Weather data is provided by ",r.a.createElement("a",{href:"https://openweathermap.org/api/one-call-api"},"OpenWeatherMap"),"."),r.a.createElement(J.a,null,r.a.createElement($.a,null,r.a.createElement(Z.a,{className:a.stickyHeader},"Hour"),n)),r.a.createElement(V.a,null,r.a.createElement($.a,null,r.a.createElement(Z.a,{rowSpan:2,className:a.stickyHeader,variant:"head"},"Weather"),t.icon.map(function(e,t){return r.a.createElement(Z.a,{key:"icon"+t},r.a.createElement("img",{alt:"",src:"".concat("../../../weatherIcon/").concat(e,".png")})," ")})),r.a.createElement($.a,null,t.main.map(function(e,t){return r.a.createElement(Z.a,{key:"main"+t},e)})),r.a.createElement($.a,null,r.a.createElement(Z.a,{className:a.stickyHeader,variant:"head"},"Weather Description"),t.description.map(function(e,t){return r.a.createElement(Z.a,{key:"description"+t},e)})),r.a.createElement($.a,null,r.a.createElement(Z.a,{className:a.stickyHeader,variant:"head"},"Temperature (\xb0C)"),t.temp.map(function(e,t){return r.a.createElement(Z.a,{key:"temp"+t},e)})),r.a.createElement($.a,null,r.a.createElement(Z.a,{className:a.stickyHeader,variant:"head"},"Wind Speed (m/s)"),t.windSpeed.map(function(e,t){return r.a.createElement(Z.a,{key:"windSpeed"+t},e)})),r.a.createElement($.a,null,r.a.createElement(Z.a,{className:a.stickyHeader,variant:"head"},"Wind Direction"),t.windDeg.map(function(e,t){return r.a.createElement(Z.a,{key:"windDeg"+t},e)})),r.a.createElement($.a,null,r.a.createElement(Z.a,{className:a.stickyHeader,variant:"head"},"Percent of Precipitation"),t.pop.map(function(e,t){return r.a.createElement(Z.a,{key:"pop"+t},Math.round(100*e)+"%")})),r.a.createElement($.a,null,r.a.createElement(Z.a,{className:a.stickyHeader,variant:"head"},"Rain (mm)*"),t.rain.map(function(e,t){return r.a.createElement(Z.a,{key:"rain"+t},e||0)})),r.a.createElement($.a,null,r.a.createElement(Z.a,{className:a.stickyHeader,variant:"head"},"Snow (mm)*"),t.snow.map(function(e,t){return r.a.createElement(Z.a,{key:"snow"+t},e||0)}))))))}var Ae=a(227),We=a(237),ze=Object(je.a)(function(e){return{root:{width:"80%",margin:e.spacing(1)}}});function Re(e){var t=ze(),a=e.timestamp,n=e.convertDate,l=e.children,o=new Date(a);return r.a.createElement(Te.a,{className:t.root},r.a.createElement(Ae.a,{avatar:r.a.createElement(We.a,null,"U")}),r.a.createElement(Fe.a,null,r.a.createElement(P.a,{align:"left",color:"textSecondary"},e.username),r.a.createElement(P.a,{align:"left",variant:"body1",style:{whiteSpace:"pre-line"},color:"textPrimary"},l),r.a.createElement(P.a,{align:"right",paragraph:!0,color:"textSecondary",component:"p"},n(o,!0))))}var Le=Object(je.a)(function(e){return{root:{margin:e.spacing(1)}}});function Be(e){var t=e.placeId,a=Object(n.useState)(),l=Object(c.a)(a,2),o=l[0],s=l[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),E=p[0],f=p[1],h=Le(),g=function(e){return console.log("arrived at comment"),b.a.get("get/comments/".concat(e)).then(function(e){console.log(e.data.rows),s(Object(m.a)(e.data.rows))})};Object(n.useEffect)(function(){g(t)},[]),Object(n.useEffect)(function(){f("")},[o]);var v=o?o.map(function(a){return a.place_id===t?r.a.createElement(Re,{convertDate:e.convertDate,timestamp:a.comment_date,username:"username"},a.content):null}):void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{height:"2rem"}),r.a.createElement(P.a,{variant:"h6"},"Have some conditions to report? Let us know by leaving a comment!"),r.a.createElement(i.a,{className:h.root,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.a.createElement(u.a,{style:{width:"80%"},multiline:!0,variant:"filled",onChange:function(e){return f(e.target.value)},value:E}),r.a.createElement(x.a,{className:h.root,onClick:function(){b.a.post("/add/comment",{placeId:t,comment:E}).then(g(t)).catch(function(e){console.log(e)})},variant:"contained",color:"primary"},"Submit"),v))}function _e(e){var t=e.tab,a=e.index,n=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{role:"tabpanel",hidden:t!==a},t===a&&r.a.createElement(i.a,null,n)))}var Ue=a(109),Ge=a.n(Ue),Ve=a(162),Ze=Ge()(Ve),qe=function(e){var t=[];return e.reduce(function(e,a){return e+=a,t.push(e),e},0),t};function Je(e){var t=e.weather,a=t.dt.map(function(e){return new Date(1e3*e)}),n=qe(t.snow),l=qe(t.rain),o={x:a,y:t.temp,type:"scatter",mode:"lines+markers",marker:{color:"red"},hovertemplate:"%{x}<br>Temperature: %{y}\xb0C<extra></extra>",showlegend:!1};console.log(l);var c={x:a,y:t.windSpeed,customdata:t.windDeg,hovertemplate:"%{x}<br>Wind Speed: %{y} m/s<br>Wind Direction: %{customdata}<extra></extra>",type:"scatter",mode:"lines+markers",marker:{color:"green"},showlegend:!1},i={x:a,y:t.rain,customdata:l,hovertemplate:"%{x}<br>1 hour rain: %{y} mm<br>Total rain: %{customdata:.2f} mm <extra></extra>",type:"scatter",mode:"lines+markers",marker:{color:"blue"},showlegend:!1},m={x:a,y:l,type:"bar",marker:{color:"#cd7eaf"},hovertemplate:"<extra></extra>",showlegend:!1},u={x:a,y:t.snow,customdata:n,hovertemplate:"%{x}<br>1 hour snow: %{y} mm<br>Total snow: %{customdata:.2f} mm <extra></extra>",type:"scatter",mode:"lines+markers",marker:{color:"#grey"},showlegend:!1},s={x:a,y:n,type:"bar",marker:{color:"#cd7eaf"},hovertemplate:"<extra></extra>",showlegend:!1},d={xaxis:{tickformat:"%b %e \n %H:%M",nticks:16},margin:{l:40,r:40,b:60,t:30,pad:4},width:900,height:200};return r.a.createElement(G.a,null,r.a.createElement(Ze,{data:[o],layout:Object(g.a)({},d,{title:{text:"<b> Temperature </b>"},yaxis:{title:{text:"Temperature (\xb0C)"}}}),config:{displayModeBar:!1}}),r.a.createElement(Ze,{data:[c],layout:Object(g.a)({},d,{title:{text:"<b>Wind Speed and Direction</b>"},yaxis:{title:{text:"Wind speed (m/s)"}}}),config:{displayModeBar:!1}}),r.a.createElement(Ze,{data:[i,m],layout:Object(g.a)({},d,{title:{text:"<b>Rain</b>"},yaxis:{title:{text:"Rain (mm)"}}}),config:{displayModeBar:!1}}),r.a.createElement(Ze,{data:[u,s],layout:Object(g.a)({},d,{title:{text:"<b>Snow</b>"},yaxis:{title:{text:"Snow (mm)"}}}),config:{displayModeBar:!1}}))}var $e=a(228),Ke=a(111),Qe=a.n(Ke),Xe=a(110),Ye=a.n(Xe),et=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,r.a.createElement(Z.a,null,r.a.createElement(ie.a,{"aria-label":"expand row",size:"small",onClick:function(){return o(!l)}},l?r.a.createElement(Ye.a,null):r.a.createElement(Qe.a,null),r.a.createElement(P.a,{variant:"h6"},r.a.createElement("b",null,e.type))))),r.a.createElement($.a,null,r.a.createElement($e.a,{in:l,timeout:"auto"},r.a.createElement(q.a,null,r.a.createElement(U.a,null,r.a.createElement($.a,null,r.a.createElement(Z.a,{colSpan:4},e.comment)),r.a.createElement($.a,null,r.a.createElement(Z.a,{variant:"head"}," What Elevation?"),r.a.createElement(Z.a,{variant:"head"}," Which Slopes?"),r.a.createElement(Z.a,{variant:"head"},"Likelihood?"),r.a.createElement(Z.a,{variant:"head"},"Expected size?")),r.a.createElement($.a,null,r.a.createElement(Z.a,null," ",r.a.createElement("img",{alt:"",src:e.elevation})," "),r.a.createElement(Z.a,null," ",r.a.createElement("img",{alt:"",src:e.aspects})," "),r.a.createElement(Z.a,null," ",r.a.createElement("img",{alt:"",src:e.likelihood})," "),r.a.createElement(Z.a,null," ",r.a.createElement("img",{alt:"",src:e.expectedSize})," ")))))))},tt=function(e){var t=e.problems?e.problems:[],a=t.map(function(e){return r.a.createElement(et,{type:e.type,comment:e.comment,elevation:e.icons.elevation,aspects:e.icons.aspects,likelihood:e.icons.likelihood,expectedSize:e.icons.expectedSize})});return t.length?r.a.createElement(q.a,{component:G.a},r.a.createElement(U.a,{size:"small"},r.a.createElement("caption",null," Avalanche bulletin is provided by ",r.a.createElement("a",{href:"https://avalanche.ca/"},"Avalanche Canada"),". "),r.a.createElement(V.a,null,r.a.createElement(et,{type:"Cornice",comment:"fake comment fake comment fake comment fake comment fake comment fake comment fake comment fake comment fake comment fake comment",elevation:"https://www.avalanche.ca/assets/images/Elevation/Elevation-0-0-1_EN.png",aspects:"https://www.avalanche.ca/assets/images/Compass/compass-1-1-1-0-0-0-0-1_EN.png",likelihood:"https://www.avalanche.ca/assets/images/Likelihood/Likelihood-3_EN.png",expectedSize:"https://www.avalanche.ca/assets/images/size/Size-15-25_EN.png"}),a))):r.a.createElement(Te.a,{style:{height:"5rem"}},r.a.createElement(Fe.a,null,r.a.createElement(P.a,null,"No problems have been reported.")))};function at(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return nt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return nt(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,l=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw l}}}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var rt=function(e){return e.reduce(function(e,t){return e.dt.push(t.dt),e.temp.push(t.temp),e.windSpeed.push(t.wind_speed),e.windDeg.push(t.wind_deg),e.pop.push(t.pop),e.rain.push(t.rain?t.rain["1h"]:0),e.snow.push(t.snow?t.snow["1h"]:0),e.description.push(t.weather[0].description),e.main.push(t.weather[0].main),e.icon.push(t.weather[0].icon),e},{dt:[],temp:[],windSpeed:[],windDeg:[],rain:[],snow:[],pop:[],description:[],main:[],icon:[]})},lt=function(e){var t={month:"long",day:"numeric",year:"numeric",hour12:!1};return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t.hour="numeric",t.minute="numeric"),new Intl.DateTimeFormat("en",t).format(e)};function ot(e){var t=e.placeId,a=e.poi,l=a.name,o=a.region,i=a.lat,m=a.lon,u=(a.type,e.information),s=u.weather,d=u.bulletin,p=rt(s),E=Object(n.useState)(0),f=Object(c.a)(E,2),h=f[0],g=f[1],v=Object(n.useState)(0),y=Object(c.a)(v,2),w=y[0],k=y[1],I=Object(n.useState)(!1),S=Object(c.a)(I,2),C=S[0],D=S[1],T=Object(n.useState)(0),F=Object(c.a)(T,2),M=F[0],H=F[1],A=Object(n.useState)(!1),W=Object(c.a)(A,2),z=W[0],R=W[1];return Object(n.useEffect)(function(){b.a.get("get/favourite/".concat(t)).then(function(e){var a,n=at(e.data.rows);try{for(n.s();!(a=n.n()).done;){if(a.value.place_id===t){D(!0);break}}}catch(r){n.e(r)}finally{n.f()}}).catch(function(e){console.log(e.message)})},[]),r.a.createElement(j.a,{maxWidth:"md",style:{marginLeft:"165px"}},r.a.createElement(P.a,{variant:"h3"},l),r.a.createElement(P.a,{variant:"h5"},"Region: ",o),r.a.createElement(x.a,{startIcon:r.a.createElement(ge.a,null),onClick:function(){b.a.post("add/favourites",{placeId:t}).then(function(){console.log(t),D(!0),R(!0)}).catch(function(e){console.log(e)})},color:"secondary",variant:"contained",disabled:C},"Favourite"),r.a.createElement(oe,{open:z,onClose:function(){return R(!1)}},"Added to favourites!"),r.a.createElement(P.a,{variant:"h6"},"Weather and avalanche bulletin for  lat: ",i,", lon:",m),r.a.createElement(xe.a,{position:"static",color:"default"},r.a.createElement(ye.a,{value:M,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){H(t)}},r.a.createElement(we.a,{wrapped:!0,icon:r.a.createElement(Oe.a,null),label:"Hourly Weather (48h)"}),r.a.createElement(we.a,{icon:r.a.createElement(Se.a,null),label:"Avalanche Bulletin"}),r.a.createElement(we.a,{icon:r.a.createElement(N.a,null),label:"Map"}))),r.a.createElement(_e,{tab:M,index:0},r.a.createElement(xe.a,{position:"static",color:"default"},r.a.createElement(ye.a,{indicatorColor:"primary",value:h,onChange:function(e,t){g(t)}},r.a.createElement(we.a,{label:"Graph"}),r.a.createElement(we.a,{label:"Table"}))),r.a.createElement(_e,{tab:h,index:0},r.a.createElement(Je,{weather:p})),r.a.createElement(_e,{tab:h,index:1},r.a.createElement(He,{convertDate:lt,weather:p}))),r.a.createElement(_e,{tab:M,index:1},r.a.createElement(xe.a,{position:"static",color:"default"},r.a.createElement(ye.a,{indicatorColor:"primary",value:w,onChange:function(e,t){k(t)}},r.a.createElement(we.a,{label:"Danger Ratings"}),r.a.createElement(we.a,{label:"Problems"}))),r.a.createElement(_e,{tab:w,index:0},r.a.createElement(Me,{convertDate:lt,bulletin:d})),r.a.createElement(_e,{tab:w,index:1},r.a.createElement(tt,{convertDate:lt,problems:d.problems}))),r.a.createElement(_e,{tab:M,index:2},r.a.createElement(xe.a,{position:"static",color:"default"}),r.a.createElement(O,{lat:i,lon:m,map:"../../../images/trail.png"})),r.a.createElement(Be,{placeId:t,convertDate:lt}))}var ct="HOME",it="INFORMATION",mt="FAVOURITES",ut="CONDITIONS",st="LOADING";function dt(e){var t=Object(n.useState)(ct),a=Object(c.a)(t,2),l=a[0],o=a[1],m=Object(n.useState)({}),u=Object(c.a)(m,2),s=u[0],d=u[1],p=Object(n.useState)([]),E=Object(c.a)(p,2),f=E[0],h=E[1],g=Object(n.useState)({}),v=Object(c.a)(g,2),b=v[0],y=v[1],w=Object(n.useState)(0),k=Object(c.a)(w,2),O=k[0],x=k[1];return r.a.createElement("div",{className:"App"},l!==st&&l!==ut&&r.a.createElement(be,{setPage:o,setFavourites:h}),l===ct&&r.a.createElement(_,{display:o,setPOI:d,setInformation:y,setPlaceId:x}),l===it&&r.a.createElement(ot,{information:b,poi:s,placeId:O}),l===mt&&r.a.createElement(ce,{display:o,setInformation:y,setPOI:d,favourites:f,setFavourites:h,setPlaceId:x}),l===st&&r.a.createElement(i.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"},r.a.createElement(A,null,"Mapping your favourites")),l===ut&&r.a.createElement(i.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"},r.a.createElement(A,null,"Looking outside...")))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},93:function(e,t,a){}},[[128,1,2]]]);
//# sourceMappingURL=main.c9474332.chunk.js.map