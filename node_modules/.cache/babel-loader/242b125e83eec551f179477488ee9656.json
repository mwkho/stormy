{"ast":null,"code":"import _slicedToArray from \"/home/mho/lighthouse/stormy/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/mho/lighthouse/stormy/app/src/components/information/Information.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useState, useEffect } from 'react';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport CloudIcon from '@material-ui/icons/Cloud';\nimport AppBar from '@material-ui/core/AppBar';\nimport TerrainIcon from '@material-ui/icons/Terrain';\nimport Typography from '@material-ui/core/Typography';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport MapIcon from '@material-ui/icons/Map';\nimport axios from \"axios\";\nimport AvalancheBulletin from \"./AvalancheBulletin\";\nimport WeatherTable from \"./WeatherTable\";\nimport CommentList from \"./CommentList\";\nimport MapItem from \"./MapItem\";\nimport TabPanel from './TabPanel';\nimport WeatherPlot from './WeatherPlot';\nimport AvalancheProblems from './AvalancheProblems';\nimport SuccessAlert from '../SuccessAlert'; // create a helper function to sort the weather data\n\nvar consolidateWeather = function consolidateWeather(weather) {\n  var initial = {\n    dt: [],\n    temp: [],\n    windSpeed: [],\n    windDeg: [],\n    rain: [],\n    snow: [],\n    pop: [],\n    description: [],\n    main: [],\n    icon: []\n  };\n  return weather.reduce(function (accumalator, current) {\n    accumalator.dt.push(current.dt);\n    accumalator.temp.push(current.temp);\n    accumalator.windSpeed.push(current.wind_speed);\n    accumalator.windDeg.push(current.wind_deg);\n    accumalator.pop.push(current.pop);\n    accumalator.rain.push(current.rain ? current.rain['1h'] : 0);\n    accumalator.snow.push(current.snow ? current.snow['1h'] : 0);\n    accumalator.description.push(current.weather[0].description);\n    accumalator.main.push(current.weather[0].main);\n    accumalator.icon.push(current.weather[0].icon);\n    return accumalator;\n  }, initial);\n}; // healper function convert date\n\n\nvar convertDate = function convertDate(date) {\n  var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var options = {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric',\n    hour12: false\n  };\n\n  if (time) {\n    options.hour = 'numeric';\n    options.minute = 'numeric';\n  }\n\n  return new Intl.DateTimeFormat('en', options).format(date);\n};\n\nexport default function Information(props) {\n  var placeId = props.placeId;\n  var _props$poi = props.poi,\n      name = _props$poi.name,\n      region = _props$poi.region,\n      lat = _props$poi.lat,\n      lon = _props$poi.lon,\n      type = _props$poi.type;\n  var _props$information = props.information,\n      weather = _props$information.weather,\n      bulletin = _props$information.bulletin;\n  var consolidate = consolidateWeather(weather);\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      weatherTab = _useState2[0],\n      setWeatherTab = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      avalancheTab = _useState4[0],\n      setAvalancheTab = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      fav = _useState6[0],\n      setFav = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tab = _useState8[0],\n      setTab = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      open = _useState10[0],\n      setOpen = _useState10[1]; // all of tab changing code goes below here\n\n\n  var changeTab = function changeTab(event, tabValue) {\n    setTab(tabValue);\n  };\n\n  var changeWeatherTab = function changeWeatherTab(event, tabValue) {\n    setWeatherTab(tabValue);\n  };\n\n  var changeAvalancheTab = function changeAvalancheTab(event, tabValue) {\n    setAvalancheTab(tabValue);\n  }; // function that disables favourite button after it is clicked\n\n\n  var addToFavourites = function addToFavourites() {\n    axios.post(\"add/favourites\", {\n      placeId: placeId\n    }).then(function () {\n      console.log(placeId);\n      setFav(true);\n      setOpen(true);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }; // disable favourites after rendering\n\n\n  useEffect(function () {\n    axios.get(\"get/favourite/\".concat(placeId)).then(function (resp) {\n      var _iterator = _createForOfIteratorHelper(resp.data.rows),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var favourite = _step.value;\n\n          if (favourite.place_id === placeId) {\n            setFav(true);\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }).catch(function (err) {\n      console.log(err.message);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"md\",\n    style: {\n      marginLeft: '165px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, name), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, \"Region: \", region), /*#__PURE__*/React.createElement(Button, {\n    startIcon: /*#__PURE__*/React.createElement(FavoriteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 26\n      }\n    }),\n    onClick: addToFavourites,\n    color: \"secondary\",\n    variant: \"contained\",\n    disabled: fav,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, \"Favourite\"), /*#__PURE__*/React.createElement(SuccessAlert, {\n    open: open,\n    onClose: function onClose() {\n      return setOpen(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, \"Added to favourites!\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, \"Weather and avalanche bulletin for  lat: \", lat, \", lon:\", lon), /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    color: \"default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    indicatorColor: \"primary\",\n    textColor: \"primary\",\n    onChange: changeTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    wrapped: true,\n    icon: /*#__PURE__*/React.createElement(CloudIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 35\n      }\n    }),\n    label: \"Hourly Weather (48h)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Tab, {\n    icon: /*#__PURE__*/React.createElement(TerrainIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 20\n      }\n    }),\n    label: \"Avalanche Bulletin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Tab, {\n    icon: /*#__PURE__*/React.createElement(MapIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 20\n      }\n    }),\n    label: \"Map\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(TabPanel, {\n    tab: tab,\n    index: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    color: \"default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    indicatorColor: \"primary\",\n    value: weatherTab,\n    onChange: changeWeatherTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    label: \"Graph\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Tab, {\n    label: \"Table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(TabPanel, {\n    tab: weatherTab,\n    index: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(WeatherPlot, {\n    weather: consolidate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TabPanel, {\n    tab: weatherTab,\n    index: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(WeatherTable, {\n    convertDate: convertDate,\n    weather: consolidate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(TabPanel, {\n    tab: tab,\n    index: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    color: \"default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    indicatorColor: \"primary\",\n    value: avalancheTab,\n    onChange: changeAvalancheTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    label: \"Danger Ratings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Tab, {\n    label: \"Problems\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(TabPanel, {\n    tab: avalancheTab,\n    index: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AvalancheBulletin, {\n    convertDate: convertDate,\n    bulletin: bulletin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TabPanel, {\n    tab: avalancheTab,\n    index: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AvalancheProblems, {\n    convertDate: convertDate,\n    problems: bulletin.problems,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(TabPanel, {\n    tab: tab,\n    index: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    color: \"default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(MapItem, {\n    lat: lat,\n    lon: lon,\n    map: \"../../../images/trail.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(CommentList, {\n    placeId: placeId,\n    convertDate: convertDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }));\n}\n;","map":{"version":3,"sources":["/home/mho/lighthouse/stormy/app/src/components/information/Information.js"],"names":["React","useState","useEffect","Tabs","Tab","Button","Container","CloudIcon","AppBar","TerrainIcon","Typography","FavoriteIcon","MapIcon","axios","AvalancheBulletin","WeatherTable","CommentList","MapItem","TabPanel","WeatherPlot","AvalancheProblems","SuccessAlert","consolidateWeather","weather","initial","dt","temp","windSpeed","windDeg","rain","snow","pop","description","main","icon","reduce","accumalator","current","push","wind_speed","wind_deg","convertDate","date","time","options","month","day","year","hour12","hour","minute","Intl","DateTimeFormat","format","Information","props","placeId","poi","name","region","lat","lon","type","information","bulletin","consolidate","weatherTab","setWeatherTab","avalancheTab","setAvalancheTab","fav","setFav","tab","setTab","open","setOpen","changeTab","event","tabValue","changeWeatherTab","changeAvalancheTab","addToFavourites","post","then","console","log","catch","err","get","resp","data","rows","favourite","place_id","message","marginLeft","problems"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport CloudIcon from '@material-ui/icons/Cloud';\nimport AppBar from '@material-ui/core/AppBar';\nimport TerrainIcon from '@material-ui/icons/Terrain';\nimport Typography from '@material-ui/core/Typography';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport MapIcon from '@material-ui/icons/Map';\n\nimport axios from \"axios\"\n\nimport AvalancheBulletin from \"./AvalancheBulletin\"\nimport WeatherTable from \"./WeatherTable\"\nimport CommentList from \"./CommentList\"\nimport MapItem from \"./MapItem\"\nimport TabPanel from './TabPanel';\nimport WeatherPlot from './WeatherPlot';\nimport AvalancheProblems from './AvalancheProblems';\nimport SuccessAlert from '../SuccessAlert'\n\n// create a helper function to sort the weather data\nconst consolidateWeather = (weather) => {\n  const initial = {dt:[], temp:[], windSpeed:[], windDeg:[], rain:[], snow:[], pop:[], description:[], main:[], icon:[]}\n  return weather.reduce((accumalator, current) => {\n    accumalator.dt.push(current.dt)\n    accumalator.temp.push(current.temp)\n    accumalator.windSpeed.push(current.wind_speed)\n    accumalator.windDeg.push(current.wind_deg)\n    accumalator.pop.push(current.pop)\n    accumalator.rain.push(current.rain ? current.rain['1h'] : 0)\n    accumalator.snow.push(current.snow ? current.snow['1h'] : 0)\n    accumalator.description.push(current.weather[0].description)\n    accumalator.main.push( current.weather[0].main)\n    accumalator.icon.push(current.weather[0].icon)\n    return accumalator\n  }, initial)\n}\n\n// healper function convert date\nconst convertDate = (date, time=false) => {\n  const options = {month:'long', day:'numeric', year:'numeric', hour12: false}\n  if (time) {\n    options.hour = 'numeric'\n    options.minute = 'numeric'\n  }\n  return new Intl.DateTimeFormat('en', options).format(date)\n}\n\nexport default function Information(props){\n  const {placeId} = props\n  const {name, region, lat, lon, type} = props.poi\n  const {weather, bulletin} = props.information\n  const consolidate = consolidateWeather(weather)\n  \n  const [weatherTab, setWeatherTab] = useState(0)\n  const [avalancheTab, setAvalancheTab] = useState(0)\n  const [fav, setFav] = useState(false)\n  const [tab, setTab] = useState(0)\n  const [open, setOpen] = useState(false)\n\n  // all of tab changing code goes below here\n  const changeTab = (event, tabValue) => {\n    setTab(tabValue)\n  }\n\n  const changeWeatherTab = (event, tabValue) => {\n    setWeatherTab(tabValue)\n  }\n  const changeAvalancheTab = (event, tabValue) => {\n    setAvalancheTab(tabValue)  \n  }\n\n  // function that disables favourite button after it is clicked\n  const addToFavourites = () => {\n    axios.post(`add/favourites`, {placeId: placeId})\n    .then(() => {\n      console.log(placeId)\n      setFav(true)\n      setOpen(true)\n    })\n    .catch(err=>{\n      console.log(err)\n    })\n  }\n\n  // disable favourites after rendering\n  useEffect(() => {\n    axios.get(`get/favourite/${placeId}`)\n    .then((resp) => {\n      for (const favourite of resp.data.rows) {\n        if (favourite.place_id === placeId) {\n          setFav(true)\n          break;\n        }\n      }\n  })\n  .catch(err=>{\n    console.log(err.message)\n  })\n}, [])\n \n  return(\n    <Container \n    maxWidth='md'\n    style={{marginLeft: '165px'}}\n    > \n\n      <Typography variant=\"h3\">\n        {name}\n      </Typography>\n      <Typography variant=\"h5\">\n        Region: {region}\n      </Typography>\n      <Button startIcon={<FavoriteIcon />} onClick={addToFavourites} color=\"secondary\" variant=\"contained\" disabled={fav} >\n        Favourite\n      </Button >\n\n      <SuccessAlert open={open} onClose={() => setOpen(false)}>\n        Added to favourites!\n      </SuccessAlert>\n\n      <Typography variant=\"h6\">\n        Weather and avalanche bulletin for  lat: {lat}, lon:{lon}\n      </Typography>\n\n      <AppBar position=\"static\" color=\"default\">      \n      <Tabs  value={tab} indicatorColor=\"primary\" textColor=\"primary\" onChange={changeTab}>\n        <Tab wrapped={true} icon={<CloudIcon/>} label={\"Hourly Weather (48h)\"}/>\n        <Tab icon={<TerrainIcon/>} label='Avalanche Bulletin'/>\n        <Tab icon={<MapIcon/>} label='Map'/>\n      </Tabs>\n      </AppBar>\n      <TabPanel tab={tab} index={0}>\n      <AppBar position=\"static\" color='default'>\n        <Tabs  indicatorColor='primary' value={weatherTab} onChange={changeWeatherTab}>\n          <Tab label='Graph'/>\n          <Tab label='Table'/>\n        </Tabs>\n      </AppBar>\n        <TabPanel tab={weatherTab} index={0}>\n          <WeatherPlot weather={consolidate} />\n        </TabPanel>\n        <TabPanel tab={weatherTab} index={1}>\n          <WeatherTable convertDate={convertDate} weather={consolidate}/>\n        </TabPanel>\n      </TabPanel>\n      <TabPanel tab={tab} index={1}>\n      <AppBar position=\"static\" color='default'>\n        <Tabs indicatorColor='primary' value={avalancheTab}  onChange={changeAvalancheTab}>\n          <Tab label='Danger Ratings'/>\n          <Tab label='Problems'/>\n        </Tabs>\n      </AppBar>\n        <TabPanel tab={avalancheTab} index={0}>\n          <AvalancheBulletin  convertDate={convertDate} bulletin={bulletin}/>\n        </TabPanel>\n        <TabPanel tab={avalancheTab} index={1}>\n          <AvalancheProblems convertDate={convertDate} problems={bulletin.problems}/>\n        </TabPanel>\n      </TabPanel>\n      <TabPanel tab={tab} index={2}>\n      <AppBar position=\"static\" color='default'>\n      </AppBar>\n        <MapItem lat={lat} lon={lon} map=\"../../../images/trail.png\"/>\n      </TabPanel>\n      <CommentList placeId={placeId} convertDate={convertDate}/>\n    </Container> \n  )\n};"]},"metadata":{},"sourceType":"module"}